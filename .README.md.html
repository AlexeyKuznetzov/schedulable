<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>/Users/rafaelnowrotek/Documents/Projekte/Project Play/schedulable/.README.md.html</title>


<style type="text/css">
body {
	color: #333;
	font: 13px/1.4 Helvetica,arial,freesans,clean,sans-serif;
	font-family: sans-serif;
}

.markdown-body {
    border: 1px solid #CACACA;
    padding: 30px;
    font-size: 15px;
    line-height: 1.7;
    word-wrap: break-word;
}
.markdown-body > *:first-child {
    margin-top: 0 !important;
}
.markdown-body > *:last-child {
    margin-bottom: 0 !important;
}
.markdown-body a.absent {
    color: #C00;
}
.markdown-body a.anchor {
    bottom: 0;
    cursor: pointer;
    display: block;
    left: 0;
    margin-left: -30px;
    padding-left: 30px;
    padding-right: 6px;
    position: absolute;
    top: 0;
}
.markdown-body a.anchor:focus {
    outline: medium none;
}
.markdown-body h1, .markdown-body h2, .markdown-body h3, .markdown-body h4, .markdown-body h5, .markdown-body h6 {
    cursor: text;
    font-weight: bold;
    line-height: 1.7;
    margin: 1em 0 15px;
    padding: 0;
    position: relative;
}

.markdown-body h1 .octicon-link, .markdown-body h2 .octicon-link, .markdown-body h3 .octicon-link, .markdown-body h4 .octicon-link, .markdown-body h5 .octicon-link, .markdown-body h6 .octicon-link {
    color: #000;
    display: none;
}
.markdown-body h1:hover a.anchor, .markdown-body h2:hover a.anchor, .markdown-body h3:hover a.anchor, .markdown-body h4:hover a.anchor, .markdown-body h5:hover a.anchor, .markdown-body h6:hover a.anchor {
    line-height: 1;
    margin-left: -22px;
    padding-left: 0;
    text-decoration: none;
    top: 15%;
}
.markdown-body h1:hover a.anchor .octicon-link, .markdown-body h2:hover a.anchor .octicon-link, .markdown-body h3:hover a.anchor .octicon-link, .markdown-body h4:hover a.anchor .octicon-link, .markdown-body h5:hover a.anchor .octicon-link, .markdown-body h6:hover a.anchor .octicon-link {
    display: inline-block;
}
.markdown-body h1 tt, .markdown-body h1 code, .markdown-body h2 tt, .markdown-body h2 code, .markdown-body h3 tt, .markdown-body h3 code, .markdown-body h4 tt, .markdown-body h4 code, .markdown-body h5 tt, .markdown-body h5 code, .markdown-body h6 tt, .markdown-body h6 code {
    font-size: inherit;
}
.markdown-body h1 {
    border-bottom: 1px solid #DDD;
    font-size: 2.5em;
}
.markdown-body h2 {
    border-bottom: 1px solid #EEE;
    font-size: 2em;
}
.markdown-body h3 {
    font-size: 1.5em;
}
.markdown-body h4 {
    font-size: 1.2em;
}
.markdown-body h5 {
    font-size: 1em;
}
.markdown-body h6 {
    color: #777;
    font-size: 1em;
}
.markdown-body p, .markdown-body blockquote, .markdown-body ul, .markdown-body ol, .markdown-body dl, .markdown-body table, .markdown-body pre {
    margin: 15px 0;
}
.markdown-body hr {
    background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC") repeat-x;
    border: 0;
    color: #CCC;
    height: 4px;
    margin: 15px 0;
    padding: 0;
}
.markdown-body ul, .markdown-body ol {
    padding-left: 30px;
}
.markdown-body ul.no-list, .markdown-body ol.no-list {
    list-style-type: none;
    padding: 0;
}
.markdown-body ul ul, .markdown-body ul ol, .markdown-body ol ol, .markdown-body ol ul {
    margin-bottom: 0;
    margin-top: 0;
}
.markdown-body dl {
    padding: 0;
}
.markdown-body dl dt {
    font-size: 14px;
    font-style: italic;
    font-weight: bold;
    margin-top: 15px;
    padding: 0;
}
.markdown-body dl dd {
    margin-bottom: 15px;
    padding: 0 15px;
}
.markdown-body blockquote {
    border-left: 4px solid #DDD;
    color: #777;
    padding: 0 15px;
}
.markdown-body blockquote > *:first-child {
    margin-top: 0;
}
.markdown-body blockquote > *:last-child {
    margin-bottom: 0;
}
.markdown-body table {
    display: block;
    overflow: auto;
    width: 100%;
    border-collapse: collapse;
}
.markdown-body table th {
    font-weight: bold;
}
.markdown-body table th, .markdown-body table td {
    border: 1px solid #DDD;
    padding: 6px 13px;
}
.markdown-body table tr {
    background-color: #FFF;
    border-top: 1px solid #CCC;
}
.markdown-body table tr:nth-child(2n) {
    background-color: #F8F8F8;
}
.markdown-body img {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -o-box-sizing: border-box;
    box-sizing: border-box;
    max-width: 100%;
    border: 0px;
}
.markdown-body span.frame {
    display: block;
    overflow: hidden;
}
.markdown-body span.frame > span {
    border: 1px solid #DDD;
    display: block;
    float: left;
    margin: 13px 0 0;
    overflow: hidden;
    padding: 7px;
    width: auto;
}
.markdown-body span.frame span img {
    display: block;
    float: left;
}
.markdown-body span.frame span span {
    clear: both;
    color: #333;
    display: block;
    padding: 5px 0 0;
}
.markdown-body span.align-center {
    clear: both;
    display: block;
    overflow: hidden;
}
.markdown-body span.align-center > span {
    display: block;
    margin: 13px auto 0;
    overflow: hidden;
    text-align: center;
}
.markdown-body span.align-center span img {
    margin: 0 auto;
    text-align: center;
}
.markdown-body span.align-right {
    clear: both;
    display: block;
    overflow: hidden;
}
.markdown-body span.align-right > span {
    display: block;
    margin: 13px 0 0;
    overflow: hidden;
    text-align: right;
}
.markdown-body span.align-right span img {
    margin: 0;
    text-align: right;
}
.markdown-body span.float-left {
    display: block;
    float: left;
    margin-right: 13px;
    overflow: hidden;
}
.markdown-body span.float-left span {
    margin: 13px 0 0;
}
.markdown-body span.float-right {
    display: block;
    float: right;
    margin-left: 13px;
    overflow: hidden;
}
.markdown-body span.float-right > span {
    display: block;
    margin: 13px auto 0;
    overflow: hidden;
    text-align: right;
}
.markdown-body code, .markdown-body tt {
    background-color: #F8F8F8;
    border: 1px solid #DDD;
    border-radius: 3px;
    margin: 0 2px;
    padding: 0 5px;
}
.markdown-body code {
    white-space: nowrap;
}
.markdown-body pre > code {
    border: medium none;
    margin: 0;
    padding: 0;
    white-space: pre;
}
.markdown-body .highlight pre, .markdown-body pre {
    background-color: #F8F8F8;
    border: 1px solid #DDD;
    border-radius: 3px;
    font-size: 13px;
    line-height: 19px;
    overflow: auto;
    padding: 6px 10px;
}
.markdown-body pre code, .markdown-body pre tt {
    border: medium none;
    margin: 0;
    padding: 0;
    word-wrap: normal;
}

pre, code, tt {
    font-family: Consolas,"Liberation Mono",Courier,monospace;
    font-size: 12px;
}

.highlight {
    background: #FFF;
}
.highlight .k,
.highlight .o,
.highlight .cp,
.highlight .cs,
.highlight .gs,
.highlight .gu,
.highlight .kc,
.highlight .kd,
.highlight .kn,
.highlight .kp,
.highlight .kr,
.highlight .kt,
.highlight .nc,
.highlight .ne,
.highlight .nf,
.highlight .ow {
    font-weight: bold;
}
.highlight .gd,
.highlight .gd .x,
.highlight .gi,
.highlight .gi .x,
.type-csharp .highlight .nf,
.type-csharp .highlight .nn {
    color: #000;
}
.highlight .c,
.highlight .cm,
.highlight .c1 {
    color: #998;
    font-style: italic;
}
.highlight .err {
    background-color: #E3D2D2;
    color: #A61717;
}
.highlight .cp,
.highlight .cs {
    color: #999;
}
.highlight .cs,
.highlight .ge {
    font-style: italic;
}
.highlight .gd {
    background-color: #FDD;
}
.highlight .gd .x {
    background-color: #FAA;
}
.highlight .gr,
.highlight .gt {
    color: #A00;
}
.highlight .gh {
    color: #999;
}
.highlight .gi {
    background-color: #DFD;
}
.highlight .gi .x {
    background-color: #AFA;
}
.highlight .go {
    color: #888;
}
.highlight .gp,
.highlight .nn {
    color: #555;
}
.highlight .gu,
.highlight .ni {
    color: #800080;
}
.highlight .kt {
    color: #458;
}
.highlight .m {
    color: #099;
}
.highlight .s {
    color: #D14;
}
.highlight .n {
    color: #333;
}
.highlight .na,
.highlight .no,
.highlight .nv,
.highlight .vc,
.highlight .vg,
.highlight .vi {
    color: #008080;
}
.highlight .nb {
    color: #0086B3;
}
.highlight .nc {
    color: #458;
}
.highlight .ne,
.highlight .nf {
    color: #900;
}
.highlight .nt {
    color: #000080;
}
.highlight .w {
    color: #BBB;
}
.highlight .mf,
.highlight .mh,
.highlight .mi,
.highlight .mo {
    color: #099;
}
.highlight .sb,
.highlight .sc,
.highlight .sd,
.highlight .s2,
.highlight .se,
.highlight .sh,
.highlight .si,
.highlight .sx,
.highlight .s1 {
    color: #D14;
}
.highlight .sr {
    color: #009926;
}
.highlight .ss {
    color: #990073;
}
.highlight .bp {
    color: #999;
}
.highlight .il {
    color: #099;
}
.highlight .gc {
    background-color: #EAF2F5;
    color: #999;
}
.type-csharp .highlight .k,
.type-csharp .highlight .kt {
    color: #00F;
}
.type-csharp .highlight .nf {
    font-weight: normal;
}
.type-csharp .highlight .nc {
    color: #2B91AF;
}
.type-csharp .highlight .s,
.type-csharp .highlight .sc {
    color: #A31515;
}

</style>


<script type="text/javascript">

function getDocumentScrollTop() 
{
   var res = document.body.scrollTop || document.documentElement.scrollTop || window.pageYOffset || 0;
   // alert(res);
   return res;
}

function setDocumentScrollTop(ypos) 
{
	window.scrollTo(0, ypos);
}

</script>


</head>
<body class="markdown-body">
<h1> <a id="user-content-schedulable" class="anchor" href="#schedulable" aria-hidden="true"><span class="octicon octicon-link"></span></a>schedulable</h1> 
<p>Handling recurring events in rails. </p> 
<h3> <a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h3> 
<p>Put the following into your Gemfile and run <code>bundle install</code></p> 
<pre lang="cli"><code>gem 'ice_cube'
gem 'schedulable'
</code></pre> 
<p>Install schedule migration and model</p> 
<pre lang="cli"><code>rails g schedulable:install
</code></pre> 
<h3> <a id="user-content-basic-usage" class="anchor" href="#basic-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic Usage</h3> 
<p>Create an event model</p> 
<pre lang="cli"><code>rails g scaffold Event name:string
</code></pre> 
<p>Configure your model to be schedulable:</p> 
<pre><code># app/models/event.rb
class Event &lt; ActiveRecord::Base
  acts_as_schedulable
end
</code></pre> 
<p>This will add an association to the model named 'schedule' which holds the schedule information. </p> 
<p>Now you're ready to setup form fields for the schedule association using the fields_for-form_helper. </p> 
<h3> <a id="user-content-attributes" class="anchor" href="#attributes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Attributes</h3> 
<p>The schedule object respects the following attributes:</p> 
<table> 
 <tbody>
  <tr> 
   <th>Name</th> 
   <th>Type</th> 
   <th>Description</th> 
  </tr> 
  <tr> 
   <td>rule</td> 
   <td>String</td> 
   <td>One of 'singular', 'daily', 'weekly', 'monthly'</td> 
  </tr> 
  <tr> 
   <td>date</td> 
   <td>Date</td> 
   <td>The date-attribute is used for singular events and also as startdate of the schedule</td> 
  </tr> 
  <tr> 
   <td>time</td> 
   <td>Time</td> 
   <td>The time-attribute is used for singular events and also as starttime of the schedule</td> 
  </tr> 
  <tr> 
   <td>days</td> 
   <td>Array</td> 
   <td>An array of weekday-names, i.e. ['monday', 'wednesday']</td> 
  </tr> 
  <tr> 
   <td>day_of_week</td> 
   <td>Hash</td> 
   <td>A hash of weekday-names, containing arrays with indices, i.e. {:monday =&gt; [1, -1]} ('every first and last monday in month')</td> 
  </tr> 
  <tr> 
   <td>interval</td> 
   <td>Integer</td> 
   <td>Specifies the interval of the recurring rule, i.e. every two weeks</td> 
  </tr> 
  <tr> 
   <td>until</td> 
   <td>Date</td> 
   <td>Specifies the enddate of the schedule. Required for terminating events.</td> 
  </tr> 
  <tr> 
   <td>count</td> 
   <td>Integer</td> 
   <td>Specifies the total number of occurrences. Required for terminating events.</td> 
  </tr> 
 </tbody>
</table> 
<h4> <a id="user-content-simpleform" class="anchor" href="#simpleform" aria-hidden="true"><span class="octicon octicon-link"></span></a>SimpleForm</h4> 
<p>A custom input for simple_form is provided with the plugin. Make sure, you installed <a href="https://github.com/plataformatec/simple_form">SimpleForm</a> and executed <code>rails generate simple_form:install</code>.</p> 
<pre lang="cli"><code>rails g schedulable:simple_form
</code></pre> 
<div class="highlight highlight-ruby">
 <pre><span class="pl-k">&lt;</span><span class="pl-s"><span class="pl-pds">%#</span> app/views/events/_form.html.erb %&gt;</span>
<span class="pl-s">&lt;%= simple_form_for(@event) do |f| %&gt;</span>
<span class="pl-s"></span>
<span class="pl-s">  &lt;div class=&quot;field&quot;&gt;</span>
<span class="pl-s">    &lt;%= f.label :name %&gt;&lt;br&gt;</span>
<span class="pl-s">    &lt;%= f.text_field :name %&gt;</span>
<span class="pl-s">  &lt;/div&gt;</span>
<span class="pl-s"></span>
<span class="pl-s">  &lt;div class=&quot;field&quot;&gt;</span>
<span class="pl-s">    &lt;%= f.label :schedule %&gt;&lt;br&gt;</span>
<span class="pl-s">    &lt;%= f.input :schedule, as: :schedule %&gt;</span>
<span class="pl-s">  &lt;/div&gt;</span>
<span class="pl-s"></span>
<span class="pl-s">  &lt;div class=&quot;actions&quot;&gt;</span>
<span class="pl-s">    &lt;%= f.submit %&gt;</span>
<span class="pl-s">  &lt;/div&gt;</span>
<span class="pl-s"></span>
<span class="pl-s">&lt;% end %&gt;</span>
<span class="pl-s"></span></pre>
</div> 
<h4> <a id="user-content-strong-parameters" class="anchor" href="#strong-parameters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong parameters</h4> 
<pre><code># app/controllers/event_controller.rb
def event_params
  params.require(:event).permit(:name, schedule_attributes: Schedulable::ScheduleSupport.param_names)
end
</code></pre> 
<h3> <a id="user-content-icecube" class="anchor" href="#icecube" aria-hidden="true"><span class="octicon octicon-link"></span></a>IceCube</h3> 
<p>The schedulable plugin uses ice_cube for calculating occurrences. You can access ice_cube-methods via the schedule association:</p> 
<div class="highlight highlight-ruby">
 <pre><span class="pl-k">&lt;</span><span class="pl-s"><span class="pl-pds">%#</span> app/views/events/show.html.erb %&gt;</span>
<span class="pl-s">&lt;p&gt;</span>
<span class="pl-s">  &lt;strong&gt;Schedule:&lt;/strong&gt;</span>
<span class="pl-s">  &lt;%<span class="pl-pds">#</span></span> prints out a human<span class="pl-k">-</span>friendly description of the schedule, such as <span class="pl-s"><span class="pl-pds">%&gt;</span> </span>
<span class="pl-s">  &lt;%= @event.schedule %<span class="pl-pds">&gt;</span></span>
<span class="pl-k">&lt;</span><span class="pl-k">/</span>p<span class="pl-k">&gt;</span></pre>
</div> 
<pre><code># prints all occurrences of the event until one year from now
puts @event.schedule.occurrences(Time.now + 1.year)
# export to ical
puts @event.schedule.to_ical
</code></pre> 
<p>See <a href="https://github.com/seejohnrun/ice_cube">IceCube</a> for more information.</p> 
<h3> <a id="user-content-internationalization" class="anchor" href="#internationalization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Internationalization</h3> 
<p>At first you need to make sure you included all neccessary datetime translations. A basic setup can be found <a href="https://github.com/svenfuchs/rails-i18n/tree/master/rails/locale">here</a>.</p> 
<h4> <a id="user-content-localize-schedulable" class="anchor" href="#localize-schedulable" aria-hidden="true"><span class="octicon octicon-link"></span></a>Localize Schedulable</h4> 
<p>Use the locale-generator to create a .yml-file containing schedulable messages in english:</p> 
<pre lang="cli"><code>rails g schedulable:locale en
</code></pre> 
<p>Schedulable has also bundled messages in german. Use <code>de</code> as identifier.</p> 
<h4> <a id="user-content-localize-ice-cube" class="anchor" href="#localize-ice-cube" aria-hidden="true"><span class="octicon octicon-link"></span></a>Localize Ice-Cube</h4> 
<p>Internationalization of ice-cube itself can be integrated by using <a href="https://github.com/joelmeyerhamme/ice_cube">this fork</a>:</p> 
<div class="highlight highlight-ruby">
 <pre><span class="pl-k">gem</span> <span class="pl-s"><span class="pl-pds">'</span>ice_cube<span class="pl-pds">'</span></span>, <span class="pl-c1">git:</span> <span class="pl-s"><span class="pl-pds">'</span>git://github.com/joelmeyerhamme/ice_cube.git<span class="pl-pds">'</span></span>, <span class="pl-c1">branch:</span> <span class="pl-s"><span class="pl-pds">'</span>international<span class="pl-pds">'</span></span> </pre>
</div> 
<h3> <a id="user-content-persist-event-occurrences" class="anchor" href="#persist-event-occurrences" aria-hidden="true"><span class="octicon octicon-link"></span></a>Persist event occurrences</h3> 
<p>We need to have the occurrences persisted because we want to query the database for all occurrences of all instances of an event model or need to add additional attributes and functionality, such as allowing users to attend to a specific occurrence of an event. The schedulable gem handles this for you. Your occurrence model must include an attribute of type 'datetime' with name 'date' as well as a reference to your event model to setup up the association properly: </p> 
<div class="highlight highlight-ruby">
 <pre>rails g model <span class="pl-c1">EventOccurrence</span> <span class="pl-c1">event_id:</span>integer <span class="pl-c1">date:</span>datetime</pre>
</div> 
<div class="highlight highlight-ruby">
 <pre><span class="pl-c"># app/models/event_occurrence.rb</span>
<span class="pl-k">class</span> <span class="pl-en">EventOccurrence<span class="pl-e"> &lt; ActiveRecord::Base</span></span>
  belongs_to <span class="pl-c1">:event</span>
<span class="pl-k">end</span></pre>
</div> 
<p>Then you can simply declare your occurrences with the acts_as_schedule-method like this:</p> 
<pre><code># app/models/event.rb
class Event &lt; ActiveRecord::Base
  acts_as_schedulable occurrences: :event_occurrences
end
</code></pre> 
<p>This will add a has_many-association with the name 'event_occurences' to your event-model. Instances of remaining occurrences are built when the schedule is saved. If the schedule has changed, the occurrences will be rebuilt if dates have also changed. Otherwise the time of the occurrence record will be adjusted to the new time. As in real life, previous occurrences will always stay untouched.</p> 
<h4> <a id="user-content-terminating-and-non-terminating-events" class="anchor" href="#terminating-and-non-terminating-events" aria-hidden="true"><span class="octicon octicon-link"></span></a>Terminating and non-terminating events</h4> 
<p>An event is terminating if an until- or count-attribute has been specified. Since non-terminating events have infinite occurrences, we cannot build all occurrences at once ;-) So we need to limit the number of occurrences in the database. By default this will be one year from now. This can be configured via the 'build_max_count' and 'build_max_period'-options. See notes on configuration. </p> 
<h4> <a id="user-content-automate-build-of-occurrences" class="anchor" href="#automate-build-of-occurrences" aria-hidden="true"><span class="octicon octicon-link"></span></a>Automate build of occurrences</h4> 
<p>Since we cannot build all occurrences at once, we will need a task that adds occurrences as time goes by. Schedulable comes with a rake-task that performs an update on all scheduled occurrences. </p> 
<pre lang="cli"><code>rake schedulable:build_occurrences
</code></pre> 
<p>You may add this task to crontab. </p> 
<h5> <a id="user-content-using-whenever-to-schedule-build-of-occurrences" class="anchor" href="#using-whenever-to-schedule-build-of-occurrences" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using 'whenever' to schedule build of occurrences</h5> 
<p>With the 'whenever' gem this can be easily achieved. </p> 
<pre><code>gem 'whenever', :require =&gt; false
</code></pre> 
<p>Generate the 'whenever'-configuration file:</p> 
<pre lang="cli"><code>wheneverize .
</code></pre> 
<p>Open up the file 'config/schedule.rb' and add the job:</p> 
<div class="highlight highlight-ruby">
 <pre>set <span class="pl-c1">:environment</span>, <span class="pl-s"><span class="pl-pds">&quot;</span>development<span class="pl-pds">&quot;</span></span>
set <span class="pl-c1">:output</span>, {<span class="pl-c1">:error</span> =&gt; <span class="pl-s"><span class="pl-pds">&quot;</span>log/cron_error_log.log<span class="pl-pds">&quot;</span></span>, <span class="pl-c1">:standard</span> =&gt; <span class="pl-s"><span class="pl-pds">&quot;</span>log/cron_log.log<span class="pl-pds">&quot;</span></span>}

every <span class="pl-c1">1</span>.day <span class="pl-k">do</span>
  rake <span class="pl-s"><span class="pl-pds">&quot;</span>schedulable:build_occurrences<span class="pl-pds">&quot;</span></span>
<span class="pl-k">end</span></pre>
</div> 
<p>Write to crontab:</p> 
<pre lang="cli"><code>whenever -w
</code></pre> 
<h3> <a id="user-content-configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h3> 
<p>Generate the configuration file</p> 
<pre lang="cli"><code>rails g schedulable:config
</code></pre> 
<p>Open 'config/initializers/schedulable.rb' and edit options as you need:</p> 
<div class="highlight highlight-ruby">
 <pre><span class="pl-c1">Schedulable</span>.configure <span class="pl-k">do </span>|<span class="pl-smi">config</span>|
  config.max_build_count <span class="pl-k">=</span> <span class="pl-c1">0</span>
  config.max_build_period <span class="pl-k">=</span> <span class="pl-c1">1</span>.year
<span class="pl-k">end</span></pre>
</div>
</body>
</html>
